<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jquery右侧悬浮加入购物车代码 - 站长素材</title>

<link rel="stylesheet" type="text/css" href="js/cart/css/base.css" />

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/cart/js/common.js"></script>
<!--  <script type="text/javascript" src="js/cart/js/quick_links.js"></script>-->

</head>
<body id="home" style="height:1000px;">
<!--左侧产品parabola.js控制-->
<div class="main">
    <div id="plist">
        <ul>
            <li>
                <div class="lh_wrap">
                    <div class="p-img"><a href="#"><img alt="入驻商家测试商品3" src="js/cart/images/147_thumb_G_1409275114094.jpg" title="入驻商家测试商品3" width="240" height="240"></a></div>
                    <div class="p-name"><a href="#" title="入驻商家测试商品3">入驻商家测试商品3</a></div>
                    <div class="p-price"><strong>￥300</strong><span id="p200"></span></div>
                    <div class="extra"><a href="#">已售出0件</a></div>
                    <div class="btns">
                        <a href="javascript:;" class="btnCart">加入购物车</a>
                        <a href="javascript:;" class="add_cart_small btnCart">关注</a>
                        <a class="btn-compare">
                            <input id="147" onClick="Compare.add(this, 147,'入驻商家测试商品3','1', 'js/cart/images/201408/thumb_img/147_thumb_G_1409275114094.jpg', '￥300', '￥360')" type="checkbox">
                            <label for="147">对比</label>
                        </a>
                    </div>
                </div>
            </li>
            <li>
                <div class="lh_wrap">
                    <div class="p-img"><a href="#"><img alt="入驻商家测试商品3" src="js/cart/images/147_thumb_G_1409275114094.jpg" title="入驻商家测试商品3" width="240" height="240"></a></div>
                    <div class="p-name"><a href="#" title="入驻商家测试商品3">入驻商家测试商品3</a></div>
                    <div class="p-price"><strong>￥300</strong><span id="p200"></span></div>
                    <div class="extra"><a href="#">已售出0件</a></div>
                    <div class="btns">
                        <a href="javascript:;" class="add_cart_large btnCart">加入购物车</a>
                        <a href="javascript:;" class="add_cart_small btnCart">关注</a>
                        <a class="btn-compare">
                            <input id="147" onClick="Compare.add(this, 147,'入驻商家测试商品3','1', 'js/cart/images/201408/thumb_img/147_thumb_G_1409275114094.jpg', '￥300', '￥360')" type="checkbox">
                            <label for="147">对比</label>
                        </a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <div id="flyItem" class="fly_item"><img src="js/cart/images/item-pic.jpg" width="40" height="40"></div>
</div>	

<div class="mui-mbar-tabs">
	<div class="quick_link_mian">
		<div class="quick_links_panel">
			<div id="quick_links" class="quick_links">
				<li id="shopCart">
					<a href="#" class="message_list" ><i class="message"></i><div class="span">购物车</div><span class="cart_num">0</span></a>
				</li>
			</div>
		</div>
		<div id="quick_links_pop" class="quick_links_pop hide"></div>
	</div>
</div>


<!--[if lte IE 8]>
<script src="js/ieBetter.js"></script>
<![endif]-->

<script type="text/javascript" src="js/cart/js/parabola.js"></script>
<script type="text/javascript">

$(function(){
	_initAddCart(0);
})

function _initAddCart(numberItem){
	// 元素以及其他一些变量
	var eleFlyElement = document.querySelector("#flyItem"), 
		eleShopCart = document.querySelector("#shopCart");
	// 抛物线运动
	var myParabola = funParabola(eleFlyElement, eleShopCart, {
		speed: 400, //抛物线速度
		curvature: 0.0008, //控制抛物线弧度
		complete: function() { //加入购物车回调函数
			console.info('加入购物车完成');
			add();
			//隐藏抛物图片
			eleFlyElement.style.visibility = "hidden";
			//购物车数量加1
			eleShopCart.querySelector("span").innerHTML = ++numberItem;
		}
	});

	// 绑定点击事件
	if (eleFlyElement && eleShopCart) {
		[].slice.call(document.getElementsByClassName("btnCart")).forEach(function(button) {
			button.addEventListener("click", function(event) {
				// 滚动大小
				var scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft || 0,
				    scrollTop = document.documentElement.scrollTop || document.body.scrollTop || 0;
				eleFlyElement.style.left = event.clientX + scrollLeft + "px";
				eleFlyElement.style.top = event.clientY + scrollTop + "px";
				eleFlyElement.style.visibility = "visible";
				// 需要重定位
				myParabola.position().move();			
			});
		});
	}
  }

function add(){
	console.info('插入元素');
	//var product = $("#quick_links_pop");
	//console.info(product.length);
	//product.append('<li class="cart_item"><div class="cart_item_pic"><a href="#"><img src="images/xiez.jpg"></a></div><div class="cart_item_desc"><a href="#" class="cart_item_name">夏季透气真皮豆豆鞋反绒男士休闲鞋韩版磨砂驾车鞋英伦船鞋男鞋子</a><div class="cart_item_sku"><span>尺码：38码（精工限量版）</span></div><div class="cart_item_price"><span class="cart_price">￥700.00</span></div></div>	</li>');
	
}
</script>


</body>
</html>